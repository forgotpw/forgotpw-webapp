<div *ngIf="!showSuccess" class="container">
  <mat-card>
    <h2>Store a password hint</h2>
    <form
      [formGroup]="storeForm"
      #storeFormDirective="ngForm"
      (ngSubmit)="onSubmit()">

      <div class="form-group">
        <mat-form-field class="full-width">
          <input
            matInput
            placeholder="Website / application" 
            formControlName="application"
            autocomplete="off"
            autofocus>
          <mat-hint>Enter the website or application name for which you are storing the password hint, e.g. "Amazon".</mat-hint>
          <mat-error *ngIf="f.application.hasError('minlength') && !f.application.hasError('required')">
            Must be at lest 3 charcters
          </mat-error>
          <mat-error *ngIf="f.application.hasError('maxlength')">
              Can be mo more than 100 charcters
          </mat-error>
          <mat-error *ngIf="f.application.hasError('required')">
            Website / application is <strong>required</strong>
          </mat-error>
        </mat-form-field>
      </div>
    
      <div class="form-group">
        <mat-form-field class="full-width">
          <input
            matInput
            placeholder="Password hint" 
            formControlName="hint"
            autocomplete="off">
          <mat-hint>A hint which will remind you of your password. Do <strong>not</strong> enter your actual password.</mat-hint>
          <mat-error *ngIf="f.hint.hasError('minlength') && !f.hint.hasError('required')">
            Must be at lest 3 charcters
          </mat-error>
          <mat-error *ngIf="f.hint.hasError('maxlength')">
              Can be mo more than 100 charcters
          </mat-error>
          <mat-error *ngIf="f.hint.hasError('required')">
            Password hint is <strong>required</strong>
          </mat-error>
        </mat-form-field>
      </div>

      <div class="form-group">
        <mat-form-field class="full-width">
          <input
            matInput
            placeholder="Your cell phone number" 
            formControlName="phone"
            autocomplete="off">
          <mat-hint>Your cell phone number which in the future we can text you this password hint to.</mat-hint>
          <mat-error *ngIf="f.phone.hasError('minlength') && !f.phone.hasError('required')">
            Must be at lest 10 charcters
          </mat-error>
          <mat-error *ngIf="f.phone.hasError('required')">
            Cell phone number is <strong>required</strong>
          </mat-error>
        </mat-form-field>
      </div>
    
      <div class="button-row">
        <button
          mat-stroked-button
          type="submit"
          color="primary"
          [disabled]="!storeForm.valid">
          Submit
        </button>
        <button
          mat-stroked-button
          type="button"
          color="basic"
          (click)="onCancel()">
          Cancel
        </button>
      </div>

      <ngx-spinner
        bdColor = "rgba(51, 51, 51, 0.8)"
        size = "large"
        color = "#fff"
        type = "ball-pulse">
      </ngx-spinner>

      <div *ngIf="showCodeLoading" style="text-align:center">
          <br/>
          <mat-progress-bar mode="indeterminate"></mat-progress-bar>
      </div>

    </form>

    <div *ngIf="showCodeEntry">
        <br/>
        <app-code-entry
          (codeEntered)="onCodeEntered($event)"
        ></app-code-entry>
    </div>
    
  </mat-card>
</div>


<div *ngIf="showSuccess" style="text-align:center">
  <p>
      <svg class="checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52"><circle class="checkmark__circle" cx="26" cy="26" r="25" fill="none"/><path class="checkmark__check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"/></svg>
      <strong>Your password hint has been stored.</strong>
  </p>
  <br/>
</div>
  